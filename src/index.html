<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <base href="/">

  <title>Bible App</title>

  <script>
    window.isSWUpdateAvailable = new Promise((resolve) => {
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.addEventListener('controllerchange', () => window.location.reload());

          navigator.serviceWorker
            .register('service-worker.js')
            .then(reg => {
              if (reg.waiting) {
                resolve(() => reg.waiting.postMessage({ action: 'skipWaiting' }));

                return;
              }

              reg.addEventListener('updatefound', () => {
                const newWorker = reg.installing;

                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === "installed") {
                    resolve(() => newWorker.postMessage({ action: 'skipWaiting' }));
                  }
                })
              })
            })
        });
      }
    });
  </script>

  <link href="manifest.json" rel="manifest">
  <link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans" rel="stylesheet">
</head>

<body>
  <ba-shell></ba-shell>
</body>
</html>
