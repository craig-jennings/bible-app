<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="description" content="Simple Bible PWA backed by the ESV API">
  <meta name="theme-color" content="#455a64">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <base href="/">

  <title>Bible App</title>

  <link href="manifest.json" rel="manifest">
  <link href="images/favicon.ico?v=1" rel="shortcut icon" type="image/x-icon">

  <script>
    window.updateAvailable = new Promise((resolve) => { window.resolveUpdatePromise = resolve; });
  </script>

  <script type="module">
    import { Workbox } from 'https://storage.googleapis.com/workbox-cdn/releases/4.1.1/workbox-window.prod.mjs';

    if ('serviceWorker' in navigator) {
      const wb = new Workbox('/service-worker.js');

      wb.addEventListener('message', (event) => {
        if (event.data.type === 'CACHE_UPDATED') {
          window.resolveUpdatePromise();
        }
      });

      wb.register();
    }
  </script>
</head>

<body>
  <ba-shell></ba-shell>

  <noscript>
    <div>
      This page requires Javascript to run.
      Please enable Javascript in your browser settings
    </div>
  </noscript>
</body>
</html>
